{"version":3,"sources":["Components/Persons.js","Components/AddPerson.js","Components/Filter.js","Services/persons.js","Components/Notification.js","App.js","index.js"],"names":["Persons","_ref","personsToShow","handleRemoval","react_default","a","createElement","map","person","key","id","name","number","onClick","AddPerson","newName","newNumber","handleNameChange","handleNumberChange","addNameAndNumber","onSubmit","value","onChange","type","Filter","handleFilterChange","newFilter","baseUrl","Services_persons","axios","get","nameObject","post","delete","concat","then","response","data","put","Notification","message","className","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewFilter","_useState9","showAll","_useState11","_useState12","notificationMessage","setNotificationMessage","useEffect","console","log","personService","length","filter","toUpperCase","includes","Components_Notification","Components_AddPerson","event","target","preventDefault","some","samePerson","find","p","changedPerson","objectSpread","returnedPerson","setTimeout","catch","error","alert","Components_Filter","Components_Persons","window","confirm","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.cf60c7f3.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Persons = ({ personsToShow, handleRemoval }) => {\r\n  const rows = () =>\r\n    personsToShow.map(person => (\r\n      <p key={person.id}>\r\n        {person.name} {person.number}\r\n        <button onClick={() => handleRemoval(person.id, person.name)}>Poista</button>\r\n      </p>\r\n    ));\r\n\r\n  return (\r\n    <div>\r\n      <h2>Numerot</h2>\r\n      {rows()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;","import React from \"react\";\r\n\r\nconst AddPerson = ({\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handleNumberChange,\r\n  addNameAndNumber\r\n}) => {\r\n  return (\r\n    <div>\r\n      <h3>Lisää uusi nimi ja numero</h3>\r\n      <form onSubmit={addNameAndNumber}>\r\n        <div>\r\n          nimi: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          numero: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">lisää</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddPerson;","import React from \"react\";\r\n\r\nconst Filter = ({ handleFilterChange, newFilter }) => {\r\n  return (\r\n    <div>\r\n      <p>\r\n        Rajaa näytettäviä{\" \"}\r\n        <input value={newFilter} onChange={handleFilterChange} />\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n\r\nconst update = (nameObject) => {\r\n    const request = axios.put(`${baseUrl}/${nameObject.id}`, nameObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = (nameObject) => {\r\n    return axios.post(baseUrl, nameObject)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}    \r\n\r\nexport default { getAll, create, remove, update }","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className=\"notification\">\r\n        {message}\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport Persons from \"./Components/Persons\";\nimport AddPerson from \"./Components/AddPerson\";\nimport Filter from \"./Components/Filter\";\nimport personService from \"./Services/persons\";\nimport Notification from \"./Components/Notification\";\nimport \"./index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [showAll] = useState(\"\");\n  const [notificationMessage, setNotificationMessage] = useState(null);\n\n  useEffect(() => {\n    console.log(\"effect\");\n    personService.getAll().then(response => {\n      setPersons(response.data);\n    });\n  }, []);\n  console.log(\"render\", persons.length, \"persons\");\n\n  const personsToShow = showAll\n    ? persons\n    : persons.filter(person =>\n        person.name.toUpperCase().includes(newFilter.toUpperCase())\n      );\n\n  const addNameAndNumber = event => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    };\n    if (persons.some(person => person.name === newName)) {\n      const samePerson = persons.find(p => p.name === newName);\n      const changedPerson = { ...samePerson, number: newNumber };\n\n      personService\n        .update(changedPerson)\n        .then(returnedPerson => {\n          setPersons(\n            persons.map(person =>\n              person.name !== newName ? person : returnedPerson\n            )\n          );\n          setNotificationMessage(\n            `${newName} on jo luettelossa, puhelinnumero muutettu`\n          );\n          console.log(\"Updated person\");\n          setTimeout(() => {\n            setNotificationMessage(null);\n          }, 5000);\n        })\n        .catch(error => {\n          alert(`henkilö ${changedPerson.name} on jo poistettu palvelimelta`);\n          setPersons(persons.filter(p => p.name !== changedPerson.name));\n        });\n      setNewName(\"\");\n      setNewNumber(\"\");\n    } else {\n      personService.create(nameObject).then(response => {\n        setPersons(persons.concat(response.data));\n      });\n      setNotificationMessage(`${newName} lisätty luetteloon`);\n      console.log(\"Added person\");\n      setTimeout(() => {\n        setNotificationMessage(null);\n      }, 5000);\n      setNewName(\"\");\n      setNewNumber(\"\");\n    }\n  };\n\n  const handleRemoval = (id, name) => {\n    if (window.confirm(`Poistetaanko ${name}?`)) {\n      personService\n        .remove(id)\n        .then(setPersons(persons.filter(p => p.id !== id)));\n      setNotificationMessage(`${name} poistettu luettelosta`);\n      setTimeout(() => {\n        setNotificationMessage(null);\n      }, 5000);\n    }\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = event => {\n    setNewFilter(event.target.value);\n  };\n\n  return (\n    <div>\n      <h1>Puhelinluettelo</h1>\n\n      <Notification message={notificationMessage} />\n      <AddPerson\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        addNameAndNumber={addNameAndNumber}\n      />\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n      <Persons personsToShow={personsToShow} handleRemoval={handleRemoval} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}